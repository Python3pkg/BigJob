


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.3. XSEDE Specific Tips &mdash; BigJob 1.0 User Manual</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'1.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="BigJob 1.0 User Manual" href="../index.html"/>
        <link rel="up" title="2. Installation" href="index.html"/>
        <link rel="next" title="2.4. Troubleshooting" href="trouble.html"/>
        <link rel="prev" title="2.2. Setting Up a Redis Server" href="redis.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> BigJob</a>
        <form class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#introduction-to-pilot-jobs">1.1. Introduction to Pilot-Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#why-do-you-need-pilot-jobs">1.2. Why do you need Pilot-Jobs?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#what-makes-bigjob-different">1.3. What makes BigJob different?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#what-can-i-use-bigjob-for">1.4. What can I use BigJob for?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#bigjob-overview">1.5. BigJob Overview</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">2. Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html">2.1. Installing BigJob</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">2.2. Setting Up a Redis Server</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">2.3. XSEDE Specific Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="trouble.html">2.4. Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">3. Working with BigJob</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/appwriting.html">3.1. Writing BigJob Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/pilotdata.html">3.2. Introduction to Pilot-Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/cmdtools.html">3.3. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/logging.html">3.4. Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/output.html">3.5. Interpreting Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../patterns/index.html">4. Common Usage Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../patterns/simple.html">4.1. Simple Ensemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patterns/chained.html">4.2. Chained Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patterns/coupled.html">4.3. Coupled Ensembles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library/index.html">5. Library Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../library/index.html#compute-and-data-services">5.1. Compute and Data Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/index.html#compute-and-data-units">5.2. Compute and Data Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/index.html#state-enumeration">5.3. State Enumeration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">6. Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/part1.html">1. Introduction and Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/part2.html">2. Simple Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/part3.html">3. Chained Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/part4.html">4. Coupled Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/table.html">5. Machines and Valid Parameters</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">BigJob</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">2.3. XSEDE Specific Tips</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="xsede-specific-tips">
<h1>2.3. XSEDE Specific Tips<a class="headerlink" href="#xsede-specific-tips" title="Permalink to this headline">¶</a></h1>
<p>This page provides both general and specific tips for running on XSEDE infrastructure. General information is provided first, and then tips are listed by machine name (i.e. Lonestar, Kraken, Trestles, Stampede etc). If you are interested in running on a specific machine, please scroll down until you see the machine name.</p>
<p>If you do not see a particular machine name, BigJob may run on this machine but not be supported yet in the documentation. Please feel free to email <tt class="code docutils literal"><span class="pre">bigjob-users&#64;googlegroups.com</span></tt> to request machine information to be added.</p>
<div class="section" id="general">
<h2>2.3.1. General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<div class="section" id="where-to-run">
<h3>2.3.1.1. Where to Run<a class="headerlink" href="#where-to-run" title="Permalink to this headline">¶</a></h3>
<p>In general, on XSEDE machines, production-grade science should be done in either the <tt class="code docutils literal"><span class="pre">$SCRATCH</span></tt> or <cite>$WORK</cite> directories on the machine. This means you will run your BigJob script and make your BigJob <tt class="code docutils literal"><span class="pre">agent</span></tt> directory in either $SCRATCH or $WORK and <strong>not</strong> in $HOME.</p>
</div>
<div class="section" id="adding-your-project-allocation">
<h3>2.3.1.2. Adding your Project Allocation<a class="headerlink" href="#adding-your-project-allocation" title="Permalink to this headline">¶</a></h3>
<p>When creating BigJob scripts for XSEDE machines, it is necessary to add the <tt class="code docutils literal"><span class="pre">project</span></tt> field to the <tt class="code docutils literal"><span class="pre">pilot_compute_description</span></tt>.</p>
<div class="highlight-python"><pre>"project": "TG-XXXXXXXXX"</pre>
</div>
<p>TG-XXXXX must be replaced with your individual allocation SU number as provided to you by XSEDE.</p>
</div>
</div>
<div class="section" id="stampede">
<h2>2.3.2. Stampede<a class="headerlink" href="#stampede" title="Permalink to this headline">¶</a></h2>
<div class="section" id="service-url">
<h3>2.3.2.1. service_url<a class="headerlink" href="#service-url" title="Permalink to this headline">¶</a></h3>
<p>Stampede uses the SLURM batch queuing system. When editing your scripts, the <tt class="code docutils literal"><span class="pre">service_url</span></tt> should be set to <tt class="code docutils literal"><span class="pre">slurm+ssh://login1.stampede.tacc.utexas.edu</span></tt>.</p>
</div>
</div>
<div class="section" id="lonestar">
<h2>2.3.3. Lonestar<a class="headerlink" href="#lonestar" title="Permalink to this headline">¶</a></h2>
<p>Installation of a virtual environment on Lonestar requires the use of a higher python version than the default. In order to load Python 2.7.x before installing the virtual environment, please execute:</p>
<div class="highlight-python"><pre>module load python</pre>
</div>
<p>Then you can proceed with the Installation instructions, and make sure that you activate your virtual environment in your <tt class="code docutils literal"><span class="pre">.bashrc</span></tt> before you try to run BigJob.</p>
<p>You will need to put the following two lines in both your <tt class="code docutils literal"><span class="pre">.bashrc</span></tt> and your <tt class="code docutils literal"><span class="pre">.bash_profile</span></tt> in order to run on Ranger. This is due to the fact that interactive shells source a different file than regular shells.</p>
<div class="highlight-python"><pre>module load python
source $HOME/bigjob/.python/bin/activate</pre>
</div>
<div class="section" id="id1">
<h3>2.3.3.1. service_url<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Lonestar uses the Sun Grid Engine (SGE) batch queuing system. When editing your scripts, the <tt class="code docutils literal"><span class="pre">service_url</span></tt> should be set to <tt class="code docutils literal"><span class="pre">sge://localhost</span></tt> for running locally on Lonestar or <tt class="code docutils literal"><span class="pre">sge+ssh://lonestar.tacc.utexas.edu</span></tt> for running remotely.</p>
</div>
<div class="section" id="queues">
<h3>2.3.3.2. queues<a class="headerlink" href="#queues" title="Permalink to this headline">¶</a></h3>
<p>Commonly used queues on Lonestar to run BigJob:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="23%" />
<col width="21%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Queue Name</th>
<th class="head">Max Runtime</th>
<th class="head">Max Procs</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>normal</td>
<td>24 hrs</td>
<td>4104</td>
<td>normal priority</td>
</tr>
<tr class="row-odd"><td>development</td>
<td>1 hr</td>
<td>264</td>
<td>development</td>
</tr>
<tr class="row-even"><td>largemem</td>
<td>24 hrs</td>
<td>48</td>
<td>large memory jobs</td>
</tr>
</tbody>
</table>
<p>A complete list of Lonestar queues can be found <a class="reference external" href="http://www.tacc.utexas.edu/user-services/user-guides/lonestar-user-guide">here</a>.</p>
</div>
</div>
<div class="section" id="kraken">
<h2>2.3.4. Kraken<a class="headerlink" href="#kraken" title="Permalink to this headline">¶</a></h2>
<div class="section" id="load-proper-python-environment">
<h3>2.3.4.1. Load Proper Python Environment<a class="headerlink" href="#load-proper-python-environment" title="Permalink to this headline">¶</a></h3>
<p>Before installing your virtual environment, you must do a <tt class="code docutils literal"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">python</span></tt> on Kraken to ensure you&#8217;re using Python 2.7.x instead of the system-level Python.</p>
</div>
<div class="section" id="using-lustre-scratch">
<h3>2.3.4.2. Using Lustre Scratch<a class="headerlink" href="#using-lustre-scratch" title="Permalink to this headline">¶</a></h3>
<p>Prior to running code on Kraken, you will need to make a directory called <tt class="code docutils literal"><span class="pre">agent</span></tt> in the same location that you are running your scripts from. The BigJob agent relies on <tt class="code docutils literal"><span class="pre">aprun</span></tt> to execute subjobs. <tt class="code docutils literal"><span class="pre">aprun</span></tt> works only if the working directory of the Pilot and Compute Units is set to the scratch space of Kraken.</p>
<p>Create your agent directory in <tt class="code docutils literal"><span class="pre">/lustre/scratch/&lt;username&gt;</span></tt> by typing:</p>
<div class="highlight-python"><pre>cd /lustre/scratch/&lt;username&gt;
mkdir agent</pre>
</div>
<p>Replace <tt class="code docutils literal"><span class="pre">&lt;username&gt;</span></tt> with your Kraken username.</p>
</div>
<div class="section" id="activate-your-credentials">
<h3>2.3.4.3. Activate your Credentials<a class="headerlink" href="#activate-your-credentials" title="Permalink to this headline">¶</a></h3>
<p>To submit jobs to Kraken from another resource using gsissh, the use of myproxy is required. To start a my proxy server, execute the following command:</p>
<div class="highlight-python"><pre>myproxy-logon -T -t &lt;number of hours&gt; -l &lt;your username&gt;</pre>
</div>
<p>You need to use your XSEDE portal username and password. To verify that your my proxy server is running, type <tt class="code docutils literal"><span class="pre">grid-proxy-info</span></tt>.</p>
<p>If it was successful, you should see a valid proxy running.</p>
</div>
<div class="section" id="id2">
<h3>2.3.4.4. service_url<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Kraken is a Cray machine with a special Torque queuing system. It requires the use of GSISSH (Globus certificates required). Initiate a grid proxy (using <tt class="code docutils literal"><span class="pre">myproxy-logon</span></tt>) before executing the BigJob application.  When editing your scripts, the <tt class="code docutils literal"><span class="pre">service_url</span></tt> should be set to <tt class="code docutils literal"><span class="pre">xt5torque+gsissh://gsissh.kraken.nics.xsede.org</span></tt>.</p>
</div>
</div>
<div class="section" id="trestles">
<h2>2.3.5. Trestles<a class="headerlink" href="#trestles" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>2.3.5.1. service_url<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Trestles uses the Torque queuing system.  When editing your scripts, the <tt class="code docutils literal"><span class="pre">service_url</span></tt> should be set to <tt class="code docutils literal"><span class="pre">pbs+ssh://trestles.sdsc.edu</span></tt>.</p>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="trouble.html" class="btn btn-neutral float-right" title="2.4. Troubleshooting"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="redis.html" class="btn btn-neutral" title="2.2. Setting Up a Redis Server"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2013, The SAGA Project.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>