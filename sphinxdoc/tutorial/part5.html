


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simple Ensembles with File Transfer &mdash; BigJob 1.0 User Manual</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'1.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="BigJob 1.0 User Manual" href="../index.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> BigJob</a>
        <form class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#introduction-to-pilot-jobs">1.1. Introduction to Pilot-Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#why-do-you-need-pilot-jobs">1.2. Why do you need Pilot-Jobs?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#what-makes-bigjob-different">1.3. What makes BigJob different?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#what-can-i-use-bigjob-for">1.4. What can I use BigJob for?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html#bigjob-overview">1.5. BigJob Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">2. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install/install.html">2.1. Installing BigJob</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/redis.html">2.2. Setting Up a Redis Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/xsede.html">2.3. XSEDE Specific Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/trouble.html">2.4. Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">3. Working with BigJob</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/appwriting.html">3.1. Writing BigJob Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/pilotdata.html">3.2. Introduction to Pilot-Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/cmdtools.html">3.3. Command-Line Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/logging.html">3.4. Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/output.html">3.5. Interpreting Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../patterns/index.html">4. Common Usage Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../patterns/simple.html">4.1. Simple Ensemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patterns/chained.html">4.2. Chained Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../patterns/coupled.html">4.3. Coupled Ensembles</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library/index.html">5. Library Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../library/index.html#compute-and-data-services">5.1. Compute and Data Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/index.html#compute-and-data-units">5.2. Compute and Data Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library/index.html#state-enumeration">5.3. State Enumeration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html">6. Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="part1.html">1. Introduction and Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="part2.html">2. Simple Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="part3.html">3. Chained Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="part4.html">4. Coupled Ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="table.html">5. Machines and Valid Parameters</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">BigJob</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">Simple Ensembles with File Transfer</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="simple-ensembles-with-file-transfer">
<h1>Simple Ensembles with File Transfer<a class="headerlink" href="#simple-ensembles-with-file-transfer" title="Permalink to this headline">¶</a></h1>
<p>So far, we have covered three different examples which submit jobs to remote resources. In these examples, we had to log on to the remote resource in order to see our data (in the agent directory). This example will cover how we get the files back on our local submission machine.</p>
<div class="section" id="data-transfer-code">
<h2>Data Transfer Code<a class="headerlink" href="#data-transfer-code" title="Permalink to this headline">¶</a></h2>
<p>Create a new file <tt class="docutils literal"><span class="pre">simple_ensemble_dataxfer.py</span></tt> and paste the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">saga</span>
<span class="kn">import</span> <span class="nn">pilot</span>
<span class="kn">import</span> <span class="nn">traceback</span>

<span class="sd">&quot;&quot;&quot; DESCRIPTION: Tutorial 4: Adding File Transfer</span>
<span class="sd">Note: User must edit  REQUIRED PILOT SETUP and TASK DESCRIPTION sections</span>
<span class="sd">This example will not run if these values are not set.</span>
<span class="sd">This example will execute on the HOSTNAME (remote resource) and transfer the output</span>
<span class="sd">back to the localhost.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c"># ---------------- BEGIN REQUIRED PILOT SETUP -----------------</span>

<span class="c"># Distributed Coordination Service - Redis server and password</span>
<span class="n">REDIS_PWD</span>   <span class="o">=</span> <span class="c"># Fill in the password to your redis server</span>
<span class="n">REDIS_URL</span>   <span class="o">=</span> <span class="s">&quot;redis://</span><span class="si">%s</span><span class="s">@localhost:6379&quot;</span> <span class="o">%</span> <span class="n">REDIS_PWD</span>

<span class="c"># Resource Information</span>
<span class="n">HOSTNAME</span>     <span class="o">=</span> <span class="c"># Remote Resource URL</span>
<span class="n">USER_NAME</span>    <span class="o">=</span> <span class="c"># Username on the remote resource</span>
<span class="n">SAGA_ADAPTOR</span> <span class="o">=</span> <span class="c"># Name of the SAGA adaptor, e.g. fork, sge, pbs, slurm, etc.</span>
<span class="c"># NOTE: See complete list of BigJob supported SAGA adaptors at:</span>
<span class="c"># http://saga-project.github.io/BigJob/sphinxdoc/tutorial/table.html</span>

<span class="c"># Fill in queue and allocation for the given resource </span>
<span class="c"># Note: Set fields to &quot;None&quot; if not applicable</span>
<span class="n">QUEUE</span>        <span class="o">=</span> <span class="c"># Add queue you want to use</span>
<span class="n">PROJECT</span>      <span class="o">=</span> <span class="c"># Add project / allocation / account to charge</span>

<span class="n">WALLTIME</span>     <span class="o">=</span> <span class="c"># Maximum Runtime (minutes) for the Pilot Job</span>

<span class="n">WORKDIR</span>      <span class="o">=</span> <span class="s">&quot;&quot;</span> <span class="c"># Path of Resource Working Directory</span>
<span class="c"># This is the directory where BigJob will store its output and error files</span>

<span class="n">SPMD_VARIATION</span> <span class="o">=</span> <span class="c"># Specify the WAYNESS of SGE clusters ONLY, valid input &#39;12way&#39; for example</span>

<span class="n">PROCESSES_PER_NODE</span> <span class="o">=</span> <span class="c"># Valid on PBS clusters ONLY - this is the number of processors per node. One processor core is treated as one processor on PBS; e.g. a node with 8 cores has a maximum ppn=8</span>

<span class="n">PILOT_SIZE</span> <span class="o">=</span> <span class="c"># Number of cores required for the Pilot-Job</span>

<span class="c"># Job Information</span>
<span class="n">NUMBER_JOBS</span>  <span class="o">=</span> <span class="c"># The TOTAL number of tasks to run</span>

<span class="c"># Continue to USER DEFINED TASK DESCRIPTION to add </span>
<span class="c"># the required information about the individual tasks.</span>

<span class="c"># ---------------- END REQUIRED PILOT SETUP -----------------</span>
<span class="c">#</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c"># this describes the parameters and requirements for our pilot job</span>
        <span class="n">pilot_description</span> <span class="o">=</span> <span class="n">pilot</span><span class="o">.</span><span class="n">PilotComputeDescription</span><span class="p">()</span>
        <span class="n">pilot_description</span><span class="o">.</span><span class="n">service_url</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">://</span><span class="si">%s</span><span class="s">@</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span>  <span class="p">(</span><span class="n">SAGA_ADAPTOR</span><span class="p">,</span><span class="n">USER_NAME</span><span class="p">,</span><span class="n">HOSTNAME</span><span class="p">)</span>
        <span class="n">pilot_description</span><span class="o">.</span><span class="n">queue</span> <span class="o">=</span> <span class="n">QUEUE</span>
        <span class="n">pilot_description</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">PROJECT</span>
        <span class="n">pilot_description</span><span class="o">.</span><span class="n">number_of_processes</span> <span class="o">=</span> <span class="n">PILOT_SIZE</span>
        <span class="n">pilot_description</span><span class="o">.</span><span class="n">working_directory</span> <span class="o">=</span> <span class="n">WORKDIR</span>
        <span class="n">pilot_description</span><span class="o">.</span><span class="n">walltime</span> <span class="o">=</span> <span class="n">WALLTIME</span>
	<span class="n">pilot_description</span><span class="o">.</span><span class="n">processes_per_node</span> <span class="o">=</span> <span class="n">PROCESSES_PER_NODE</span>
	<span class="n">pilot_description</span><span class="o">.</span><span class="n">spmd_variation</span> <span class="o">=</span> <span class="n">SPMD_VARIATION</span>

        <span class="c"># create a new pilot job</span>
        <span class="n">pilot_compute_service</span> <span class="o">=</span> <span class="n">pilot</span><span class="o">.</span><span class="n">PilotComputeService</span><span class="p">(</span><span class="n">REDIS_URL</span><span class="p">)</span>
        <span class="n">pilotjob</span> <span class="o">=</span> <span class="n">pilot_compute_service</span><span class="o">.</span><span class="n">create_pilot</span><span class="p">(</span><span class="n">pilot_description</span><span class="p">)</span>


        <span class="c"># submit tasks to pilot job</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">NUMBER_JOBS</span><span class="p">):</span>
	<span class="c"># -------- BEGIN USER DEFINED TASK DESCRIPTION --------- #</span>
            <span class="n">task_desc</span> <span class="o">=</span> <span class="n">pilot</span><span class="o">.</span><span class="n">ComputeUnitDescription</span><span class="p">()</span>
            <span class="n">task_desc</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="s">&#39;/bin/echo&#39;</span>
            <span class="n">task_desc</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;I am task number $TASK_NO&#39;</span><span class="p">,</span> <span class="p">]</span>
            <span class="n">task_desc</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;TASK_NO&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span>
            <span class="n">task_desc</span><span class="o">.</span><span class="n">number_of_processes</span> <span class="o">=</span> <span class="mi">1</span>
	    <span class="n">task_desc</span><span class="o">.</span><span class="n">spmd_variation</span> <span class="o">=</span> <span class="n">single</span> <span class="c"># Valid values are single or mpi</span>
            <span class="n">task_desc</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="s">&#39;stdout.txt&#39;</span>
            <span class="n">task_desc</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="s">&#39;stderr.txt&#39;</span>
	<span class="c"># -------- END USER DEFINED TASK DESCRIPTION --------- #</span>

            <span class="n">task</span> <span class="o">=</span> <span class="n">pilotjob</span><span class="o">.</span><span class="n">submit_compute_unit</span><span class="p">(</span><span class="n">task_desc</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&quot;* Submitted task &#39;</span><span class="si">%s</span><span class="s">&#39; with id &#39;</span><span class="si">%s</span><span class="s">&#39; to </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span> <span class="n">HOSTNAME</span><span class="p">)</span>
            <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

        <span class="k">print</span> <span class="s">&quot;Waiting for tasks to finish...&quot;</span>
        <span class="n">pilotjob</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

	<span class="c"># ------------ BEGIN FILE TRANSFER LOGIC ------------- #</span>
        <span class="c"># all compute units have finished. now we can use saga-python</span>
        <span class="c"># to transfer back the output files...</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">saga</span><span class="o">.</span><span class="n">filesystem</span><span class="o">.</span><span class="n">Directory</span><span class="p">(</span><span class="s">&quot;sftp://</span><span class="si">%s</span><span class="s">/&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">HOSTNAME</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
            <span class="n">local_filename</span> <span class="o">=</span> <span class="s">&quot;ex-2-stdout-</span><span class="si">%s</span><span class="s">.txt&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">get_id</span><span class="p">())</span>
            <span class="n">d</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">/stdout.txt&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">get_local_working_directory</span><span class="p">()),</span> <span class="s">&quot;file://localhost/</span><span class="si">%s</span><span class="s">/</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">local_filename</span><span class="p">))</span>
            <span class="k">print</span> <span class="s">&quot;* Output for &#39;</span><span class="si">%s</span><span class="s">&#39; copied to: &#39;./</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span> <span class="n">local_filename</span><span class="p">)</span>
	<span class="c"># ------------ END FILE TRANSFER LOGIC  ------------- #</span>

        <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;AN ERROR OCCURRED: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)))</span>
            <span class="c"># print a stack trace in case of an exception -</span>
            <span class="c"># this can be helpful for debugging the problem</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">return</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="c"># alway try to shut down pilots, otherwise jobs might end up</span>
        <span class="c"># lingering in the queue</span>
        <span class="k">print</span> <span class="p">(</span><span class="s">&quot;Terminating BigJob...&quot;</span><span class="p">)</span>
        <span class="n">pilotjob</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
        <span class="n">pilot_compute_service</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<div class="section" id="how-to-edit-the-examples">
<h3>How to Edit The Examples<a class="headerlink" href="#how-to-edit-the-examples" title="Permalink to this headline">¶</a></h3>
<p>Open the file <tt class="docutils literal"><span class="pre">simple_ensemble_dataxfer.py.</span></tt> You will need to make the necessary changes to the BEGIN REQUIRED PILOT SETUP as you have been making to the previous examples. It is sufficient to copy-paste from the previous examples if you are submitting to the same remote resource.</p>
<p>You may need to revisit the previous part of this tutorial to understand how to fill out this section if you skipped it.</p>
<p>The link to the table is reiterated here for your convenience:</p>
<p><a class="reference external" href="http://saga-project.github.io/BigJob/sphinxdoc/tutorial/table.html">Valid Variable Parameters</a>.</p>
<p>The logic of this file is exactly the same as in the first tutorial example, Simple Ensembles. The only addition to this file is beginning on Line 91, &#8220;BEGIN FILE TRANSFER LOGIC.&#8221; It is pasted below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># ------------ BEGIN FILE TRANSFER LOGIC ------------- #</span>
<span class="c"># all compute units have finished. now we can use saga-python</span>
<span class="c"># to transfer back the output files...</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">saga</span><span class="o">.</span><span class="n">filesystem</span><span class="o">.</span><span class="n">Directory</span><span class="p">(</span><span class="s">&quot;sftp://</span><span class="si">%s</span><span class="s">/</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">HOSTNAME</span><span class="p">,</span><span class="n">WORKDIR</span><span class="p">))</span>
<span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
    <span class="n">local_filename</span> <span class="o">=</span> <span class="s">&quot;ex-2-stdout-</span><span class="si">%s</span><span class="s">.txt&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">get_id</span><span class="p">())</span>
    <span class="n">d</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">/stdout.txt&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">get_local_working_directory</span><span class="p">()),</span> <span class="s">&quot;file://localhost/</span><span class="si">%s</span><span class="s">/</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">local_filename</span><span class="p">))</span>
    <span class="k">print</span> <span class="s">&quot;* Output for &#39;</span><span class="si">%s</span><span class="s">&#39; copied to: &#39;./</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span> <span class="n">local_filename</span><span class="p">)</span>
<span class="c"># ------------ END FILE TRANSFER LOGIC  ------------- #</span>
</pre></div>
</div>
<p>You do not have to change this logic. It uses the saga-python file transfer capabilities to get the output back to the submitting resource. Let&#8217;s review how it does this. First, a handle to the directory where the files are located are obtained.</p>
</div>
<div class="section" id="run-the-code">
<h3>Run the Code<a class="headerlink" href="#run-the-code" title="Permalink to this headline">¶</a></h3>
<p>Save the file and execute it <strong>(make sure your virtualenv is activated):</strong></p>
<div class="highlight-bash"><div class="highlight"><pre>python simple_ensemble_dataxfer.py
</pre></div>
</div>
<p>The output should look something like this:</p>
<div class="highlight-none"><div class="highlight"><pre>* Submitted task 1 with id 8044 to localhost
Waiting for tasks to finish...
Terminating BigJob...
</pre></div>
</div>
</div>
<div class="section" id="check-the-output">
<h3>Check the Output<a class="headerlink" href="#check-the-output" title="Permalink to this headline">¶</a></h3>
<p><strong>Steps to interpreting your output:</strong></p>
<p>1.) We will find all the relevant BigJob output in the directory that we defined as &#8220;WORKDIR&#8221; in the above example.</p>
<p><tt class="docutils literal"><span class="pre">cd</span></tt> into your &#8220;working directory.&#8221; In the examples on this tutorial, this would be the <tt class="docutils literal"><span class="pre">$HOME/agent</span></tt> directory.</p>
<p>2.) The agent directory contains a directory that is named after the Pilot Service. This directory begins with <tt class="docutils literal"><span class="pre">bj-####</span></tt>, where ### is a unique identifier.</p>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>python<span class="o">)</span>-bash-3.2<span class="nv">$ </span><span class="nb">cd </span>agent
<span class="o">(</span>python<span class="o">)</span>-bash-3.2<span class="nv">$ </span>ls
bj-bac51654-d96b-11e2-8773-a4badb0c3696
stdout-bj-bac51654-d96b-11e2-8773-a4badb0c3696-agent.txt
stderr-bj-bac51654-d96b-11e2-8773-a4badb0c3696-agent.txt
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">cd</span></tt> into the <tt class="docutils literal"><span class="pre">bj-####</span></tt> directory.</p>
<p>3.) If you do an <tt class="docutils literal"><span class="pre">ls</span></tt> in this directory, you should see a number of directories that begin with <tt class="docutils literal"><span class="pre">sj-###</span></tt> where ### is a unique identifier. These sj-directories represent each task that ran. For example, if NUMBER_JOBS=4, then we ran 4 tasks in the above example, so we would expect 4 sub-job directories as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>python<span class="o">)</span>-bash-3.2<span class="nv">$ </span><span class="nb">cd </span>bj-bac51654-d96b-11e2-8773-a4badb0c3696/
<span class="o">(</span>python<span class="o">)</span>-bash-3.2<span class="nv">$ </span>ls
sj-bb1dcfb0-d96b-11e2-8773-a4badb0c3696
sj-bb634946-d96b-11e2-8773-a4badb0c3696
sj-bb409194-d96b-11e2-8773-a4badb0c3696
sj-bb85fd9c-d96b-11e2-8773-a4badb0c3696
</pre></div>
</div>
<p>4.) Contained within each sub-job directory is a stdout.txt (which contains the output of your executable) and stderr.txt (which contains the output of standard error on the command line &#8211; it will be blank if there were no errors when running your executable) file. Please note that if you defined different names for the &#8220;output&#8221; and &#8220;error&#8221; fields in your compute unit description, then the names stdout and stderr will vary.</p>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>python<span class="o">)</span>-bash-3.2<span class="nv">$ </span><span class="nb">cd </span>sj-bb1dcfb0-d96b-11e2-8773-a4badb0c3696/
<span class="o">(</span>python<span class="o">)</span>-bash-3.2<span class="nv">$ </span>ls
simple-ensemble-stdout.txt
simple-ensemble-stderr.txt
</pre></div>
</div>
<p>5.) Open simple-ensemble-stdout.txt and note the output from your script.</p>
</div>
<div class="section" id="logging-and-debugging">
<h3>Logging and Debugging<a class="headerlink" href="#logging-and-debugging" title="Permalink to this headline">¶</a></h3>
<p>Since working with distributed systems is inherently complex and much of the
complexity is hidden within BigJob, it is necessary to do a lot of internal
logging. By default, logging output is disabled, but if something goes wrong or
if you&#8217;re just curious, you can enable the logging output by setting the
environment variable <tt class="docutils literal"><span class="pre">BIGJOB_VERBOSE</span></tt> to a value between 1 (print only critical
messages) and 5 (print all messages). Give it a try with the above example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">BIGJOB_VERBOSE</span><span class="o">=</span>5 python simple_ensembles.py
</pre></div>
</div>
</div>
</div>
</div>


          <footer>
  

  <hr/>

  <p>
      &copy; Copyright 2013, The SAGA Project.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>